#!/bin/sh

# Global S2I variable setup
source `dirname "$0"`/s2i-setup

# Pre-Assemble
if [ -f $S2I_SOURCE_DIR/.s2i/action_hooks/pre_assemble ]; then
    if [ ! -x $S2I_SOURCE_DIR/.s2i/action_hooks/pre_assemble ]; then
        echo "WARNING: Script $S2I_SOURCE_DIR/.s2i/action_hooks/pre_assemble not executable."
    fi
fi

if [ -x $S2I_SOURCE_DIR/.s2i/action_hooks/pre_assemble ]; then
    echo " -----> Running $S2I_SOURCE_DIR/.s2i/action_hooks/pre_assemble"
    $S2I_SOURCE_DIR/.s2i/action_hooks/pre_assemble
fi

echo " -----> Running base Assemble $BASE_S2I_SCRIPTS_PATH/assemble"

# Post-Assemble
if [ -f $S2I_SOURCE_DIR/.s2i/action_hooks/post_assemble ]; then
    if [ ! -x $S2I_SOURCE_DIR/.s2i/action_hooks/post_assemble ]; then
        echo "WARNING: Script $S2I_SOURCE_DIR/.s2i/action_hooks/post_assemble not executable."
    fi
fi

if [ -x $S2I_SOURCE_DIR/.s2i/action_hooks/post_assemble ]; then
    echo " -----> Running $S2I_SOURCE_DIR/.s2i/action_hooks/post_assemble"
    $S2I_SOURCE_DIR/.s2i/action_hooks/post_assemble
fi
